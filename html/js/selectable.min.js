"use strict";var Selectable=Selectable||{};Selectable.parent=null,Selectable.marquee={element:null,x:0,y:0,width:0,height:0},Selectable.items=[],Selectable.mode="touch",Selectable.init=function(e){Selectable.parent=$("#selectable"),Selectable.mode=e.mode||"touch";for(var t=Selectable.parent.find("*"),l=0;l<t.length;l++){var a=$(t[l]);(a.hasClass("button")||a.is("input"))&&a.bind("mousedown",function(e){e.stopPropagation()})}for(var s=this.parent.find("li"),l=0;l<s.length;l++){var c=s[l];c.addClass("selectable-item"),Selectable.items.push(c)}this.marquee.element=$("<div></div>"),this.marquee.element.attr("id","selection-marquee"),this.parent.append(this.marquee.element),this.marquee.element.hide();var m=0;this.parent.bind("mousedown",function(e){e.preventDefault();for(var t=Selectable.parent.find(".selected"),l=0;l<t.length;l++)$(t[l]).removeClass("selected");m=setTimeout(function(){Selectable.marquee.element.show(),Selectable.marquee.x=e.pageX,Selectable.marquee.y=e.pageY,Selectable.marquee.width=0,Selectable.marquee.height=0,Selectable.marquee.element.css("left",Selectable.marquee.x),Selectable.marquee.element.css("top",Selectable.marquee.y)},100)}),this.parent.bind("mousemove",function(e){if(e.preventDefault(),"none"!==Selectable.marquee.element.css("display")){Selectable.marquee.width=Math.abs(Selectable.marquee.x-e.pageX),Selectable.marquee.height=Math.abs(Selectable.marquee.y-e.pageY),e.pageX<Selectable.marquee.x&&Selectable.marquee.element.css("left",e.pageX),e.pageY<Selectable.marquee.y&&Selectable.marquee.element.css("top",e.pageY),Selectable.marquee.element.css("width",Selectable.marquee.width),Selectable.marquee.element.css("height",Selectable.marquee.height);for(var t=Selectable.marquee.element.offset().left,l=Selectable.marquee.element.offset().top,a=0;a<Selectable.items.length;a++){var s=Selectable.items[a],c=s.offset().left,m=s.offset().top,r=s.outerWidth(),n=s.outerHeight();"touch"===Selectable.mode?c+r>t&&t+Selectable.marquee.width>c&&m+n>l&&l+Selectable.marquee.height>m?s.addClass("selected"):s.hasClass("selected")&&s.removeClass("selected"):c>=t&&m>=l&&c+r<=t+Selectable.marquee.width&&m+n<=l+Selectable.marquee.height?s.addClass("selected"):s.hasClass("selected")&&s.removeClass("selected")}}}),this.parent.bind("mouseup mouseleave",function(e){e.preventDefault(),clearTimeout(m),Selectable.marquee.element.css("left",0),Selectable.marquee.element.css("top",0),Selectable.marquee.element.css("width",0),Selectable.marquee.element.css("height",0),Selectable.marquee.element.hide()})},Selectable.addItem=function(e){e.addClass("selectable-item"),e.click(function(t){t.preventDefault(),e.toggleClass("selected")}),Selectable.items.push(e)},Selectable.removeSelected=function(e){for(var t=$("#selectable").find(".selected"),l=0;l<t.length;l++){var a=$(t[l]);a.fadeOut(250,function(){this.remove()})}setTimeout(e,300)};