<html>
<head>
<title>Debug</title>

<link rel="stylesheet" href="jquery-ui.min.css">
<script src="external/jquery/jquery.js"></script>
<script src="jquery-ui.min.js"></script>

<link rel="stylesheet" href="css/responsivegridsystem/html5reset.css" media="all">
<link rel="stylesheet" href="css/responsivegridsystem/col.css" media="all">
<link rel="stylesheet" href="css/responsivegridsystem/2cols.css" media="all">

<link rel="stylesheet" href="css/statBars.css">
<link rel="stylesheet" href="css/itemList.css">
<link rel="stylesheet" href="css/itemIcons.css">

<script src="js/cpp.js"></script>

<style>
body, html {
  overflow: hidden;
}

body {
  color: #121212;
}

#test {
  width: 250px;
  height: 100px;
  margin: 0 auto;
  text-align: center;
}

#hpBar {
  position: absolute;
  left: 10px;
  top: 10px;
  width: 200px;
}

.col {
  padding: 1em 0;
  text-align:center;
}
</style>
<head>
<body>

<div id="selectable">

  <div class="section group">

    <div class="col span_1_of_2">

      <div class="section group">
        <div class="col span_1_of_2">
          <button onclick='resetHP();'>Reset</button>
        </div>

        <div class="col span_1_of_2">
          <button onclick='addItem();'>Add Item</button>
          <button onclick='removeSelectedItems();'>Remove Selected Items</button>
        </div>
      </div>

    </div>
    
    <div class="col span_1_of_2">

      <ol id="itemList"></ol>

    </div>

  </div>

</div>

<div id="hpBar" class="meter">
  <span style="width: 100%"></span>
</div>

<script>
$(function() {
  $("#selectable").selectable({
    autoRefresh: false,
    tolerance: "touch",
    filter: "li"
  });
  
  $("input[type=submit], a, button").button()
    .click(function(event)  {
      event.preventDefault();
    });

  $("button, input[type='button'], input[type='submit']").button()
    .bind('mouseup', function() {
      $(this).blur();     // prevent jquery ui button from remaining in the active state
    });
});

var items = [
  'grapes',
  'tomato',
  'redApple',
  'greenApple'
];

var hpBar = document.getElementById('hpBar');

function resetHP() {
  window.cpp.setHP(5);
}

function setHP(val) {
  hpBar.children[0].style.width = val + '%';
}

function addItem(index) {
  /*index = index || (Math.random() * 500);

  $('#selectable').append('<li class="ui-widget-content">Item ' + Math.floor((Math.random() * 500)) + '</li>');*/

  index = index || Math.floor((Math.random() * items.length));

  $('#itemList').append('<li class="ui-widget-content"><img id="' + items[index] + '" src="gfx/placeholder.png"></li>');

  $("#selectable").selectable("refresh");
}

function removeSelectedItems() {
  var selected = $('#itemList .ui-selected');
  selected.remove();

  $("#selectable").selectable("refresh");
}

function displayImage(base64) {
  document.getElementById("magicImg").src = "data:image/png;base64," + base64;
}
</script>
</body>
</html>
